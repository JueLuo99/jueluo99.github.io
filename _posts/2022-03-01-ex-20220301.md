---
layout: post
title: 
date: 2022-03-01 10:37
category: 
author: 
tags: []
summary: 
---

# 中小型企业网络组建实验

## 问题1

> 公司总共有250人，技术部93人，市场部24人，人事部10人，财务部5人，总经办4人，其他员工114人，现将两个C类地址 192.168.1.0/24 、 192.168.2.0/24用来给以上部门划分不同子网。

### 分析

- 给每个部门分别划分一个子网
- 题目未设定每名员工的设备数量，所以假设为 1 台
- 每个子网设计上应当留有一定的可用地址，以便后续的网络设备和软件部署
- 考虑各部门未来发展需要，且题目给出的环境允许，给每个部门预留出当前部门人数 30% 以上的可用地址
  
### 解决方案

|部门名称|部门人数|子网地址|除去人数后剩余可用地址数量|
|:-------:|:-------:|:-------:|:-------:|
|技术部|93|192.168.1.0/25|33|
|市场部|24|192.168.1.128/26|38|
|人事部|10|192.168.1.192/27|20|
|财务部|5|192.168.1.224/28|9|
|总经办|4|192.168.1.240/28|10|
|其他员工|114|192.168.2.0/24|140|

上述方案是一个理论上可满足实际需求和未来发展需要的较优解

## 问题2

> 使用任意模拟器组建该网络拓扑结构，并实现以下要求
> 1. 部门之间相互隔离
> 1. 所有部门能访问OA系统
> 1. 开发平台只有技术部能访问
> 1. 财务系统只有财务部能访问
> 1. 所有人都能访问Internet（外网）
> 1. 将门户网站做外网映射

### 整体分析

- 题目未对各部门的网络地址做出要求，故沿用问题 1 中的方案作为该题的背景
- 最近在尝试接触和摸索华为 eNSP，故使用华为 eNSP 来模拟网络拓扑结构

![](/assets/2022/900.png)

### 需求1：各部门之间相互隔离

该需求可使用 VLAN 技术实现

各 PC 的 IP 配置如图中所示

在图中的 LSW1 上

```
<Huawei>system-view
[Huawei]sysname L2S1

[L2S1]vlan batch 10 20 30

[L2S1]interface Ethernet 0/0/1
[L2S1-Ethernet0/0/1]port link-type access
[L2S1-Ethernet0/0/1]port default vlan 10
[L2S1-Ethernet0/0/1]quit
[L2S1]interface Vlanif 10
[L2S1-Vlanif10]ip address 192.168.1.241 28
[L2S1-Vlanif10]quit

[L2S1]interface Ethernet 0/0/2
[L2S1-Ethernet0/0/2]port link-type access
[L2S1-Ethernet0/0/2]port default vlan 20
[L2S1-Ethernet0/0/2]quit
[L2S1]interface Vlanif 20
[L2S1-Vlanif20]ip address 192.168.1.225 28
[L2S1-Vlanif20]quit

[L2S1]interface Ethernet 0/0/3
[L2S1-Ethernet0/0/3]port link-type access
[L2S1-Ethernet0/0/3]port default vlan 30
[L2S1-Ethernet0/0/3]quit
[L2S1]interface vlan 30
[L2S1-Vlanif30]ip address 192.168.1.193 27
[L2S1-Vlanif30]quit
```

在图中的 LSW2 上

```
<Huawei>system-view
[Huawei]sysname L2S2

[L2S2]vlan batch 40 50 60

[L2S2]interface Ethernet 0/0/1
[L2S2-Ethernet0/0/1]port link-type access
[L2S2-Ethernet0/0/1]port default vlan 40
[L2S2-Ethernet0/0/1]quit
[L2S2]interface Vlanif 40
[L2S2-Vlanif40]ip address 192.168.1.129 26
[L2S2-Vlanif40]quit

[L2S2]interface Ethernet 0/0/2
[L2S2-Ethernet0/0/2]port link-type access
[L2S2-Ethernet0/0/2]port default vlan 50
[L2S2-Ethernet0/0/2]quit
[L2S2]interface Vlanif 50
[L2S2-Vlanif50]ip address 192.168.1.1 25
[L2S2-Vlanif50]quit

[L2S2]interface Ethernet 0/0/3
[L2S2-Ethernet0/0/3]port link-type access
[L2S2-Ethernet0/0/3]port default vlan 60
[L2S2-Ethernet0/0/3]quit
[L2S2]interface Vlanif 60
[L2S2-Vlanif60]ip address 192.168.2.1 24
[L2S2-Vlanif60]quit
```

在三层交换机上

```
<Huawei>system-view
[Huawei]sysname L3S
[L3S]vlan batch 10 20 30 40 50 60

[L3S]interface GigabitEthernet 0/0/1
[L3S-GigabitEthernet0/0/1]port link-type trunk
[L3S-GigabitEthernet0/0/1]port trunk allow-pass vlan 10 20 30

[L3S]interface Vlanif 10
[L3S-Vlanif10]ip address 192.168.1.241 28
[L3S-Vlanif10]quit

[L3S]interface Vlanif 20
[L3S-Vlanif20]ip address 192.168.1.225 28
[L3S-Vlanif20]quit

```

### 需求2：所有部门能够访问 OA 系统

该需求亦可使用 VLAN 功能实现


```
<Huawei>system-view
[Huawei]sysname R1


```